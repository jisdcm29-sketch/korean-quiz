<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1A-1Í≥º Îã®Ïñ¥ ÌÖåÏä§Ìä∏ (Ï†ïÎ∞Ä ÍµêÏ†ïÎ≥∏)</title>
    <style>
        body { font-family: 'Arial', sans-serif; text-align: center; background-color: #f0f4f8; padding: 20px; color: #333; }
        .container { max-width: 500px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; font-size: 22px; }
        input { width: 85%; padding: 15px; margin: 15px 0; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 18px; text-align: center; }
        button { background-color: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { background-color: #2980b9; }
        .choice-btn { display: block; width: 100%; margin: 12px 0; background-color: #ffffff; color: #333; text-align: center; border: 2px solid #3498db; padding: 15px; font-size: 18px; }
        .choice-btn:hover { background-color: #3498db; color: white; }
        #quiz-section, #result-section, #review-section { display: none; }
        .wrong-list { text-align: left; background: #fff5f5; padding: 15px; border-radius: 10px; margin: 20px 0; border: 1px solid #feb2b2; max-height: 300px; overflow-y: auto; }
        .wrong-item { margin-bottom: 10px; font-size: 16px; border-bottom: 1px dashed #feb2b2; padding-bottom: 5px; }
        .score-text { font-size: 24px; font-weight: bold; color: #e74c3c; margin: 10px 0; }
        .instruction { font-size: 15px; color: #666; margin-bottom: 20px; background: #eef2f7; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-section">
        <h2>1A: 1-—Ä —Ö–∏—á—ç—ç–ª<br>“Æ–≥—Å–∏–π–Ω —Å–∞–Ω–≥–∏–π–Ω —Ç–µ—Å—Ç</h2>
        <p style="color: #7f8c8d;">–ù—ç—Ä—ç—ç –æ—Ä—É—É–ª–∞–∞–¥ —ç—Ö—ç–ª–Ω—ç “Ø“Ø.</p>
        <input type="text" id="userName" placeholder="–¢–∞–Ω—ã –Ω—ç—Ä">
        <br><br>
        <button onclick="startQuiz()">–≠—Ö–ª—ç—Ö</button>
    </div>

    <div id="quiz-section">
        <h3 id="question-number" style="color: #3498db;"></h3>
        <p id="question-instruction" class="instruction"></p>
        <p id="question-text" style="font-size: 32px; font-weight: bold; margin: 25px 0; color: #2c3e50;"></p>
        <div id="choices"></div>
    </div>

    <div id="review-section">
        <h2 style="color: #e67e22;">–ê–ª–¥–∞–∞–≥–∞–∞ —à–∞–ª–≥–∞–Ω–∞ —É—É</h2>
        <p>–≠–¥–≥—ç—ç—Ä “Ø–≥—Å–∏–π–≥ —Ü—ç—ç–∂–ª—ç—ç–¥ –¥–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–Ω–æ —É—É.</p>
        <div id="wrong-answers-container" class="wrong-list"></div>
        <button onclick="retryQuiz()" style="background-color: #e67e22;">–û–π–ª–≥–æ–ª–æ–æ, –¥–∞—Ö–∏–Ω —ç—Ö–ª—ç—Ö</button>
    </div>

    <div id="result-section">
        <h2 id="result-title" style="color: #27ae60;">üéâ –¢—ç–Ω—Ü–ª—ç—ç!</h2>
        <div id="result-content">
            <p id="result-msg" style="font-size: 18px; line-height: 1.8; margin: 20px 0;"></p>
        </div>
    </div>
</div>

<script>
    // Î™ΩÍ≥®Ïñ¥ Ï≤†Ïûê Ï†ÑÏàò Í≤ÄÏ¶ù ÏôÑÎ£å (PDF Îç∞Ïù¥ÌÑ∞ Í∏∞Î∞ò) 
    const rawWords = [
        { kor: "Í≥µÌï≠", mon: "–Ω–∏—Å—ç—Ö –æ–Ω–≥–æ—Ü–Ω—ã –±—É—É–¥–∞–ª", pos: "n" }, { kor: "ÏãúÏû•", mon: "–∑–∞—Ö", pos: "n" }, 
        { kor: "Í∞ÄÎã§", mon: "—è–≤–∞—Ö", pos: "v" }, { kor: "ÏòÅÍµ≠", mon: "–±—Ä–∏—Ç–∞–Ω", pos: "n" }, 
        { kor: "Ï±ÖÏÉÅ", mon: "—à–∏—Ä—ç—ç", pos: "n" }, { kor: "ÌïôÍµê", mon: "—Å—É—Ä–≥—É—É–ª—å", pos: "n" },
        { kor: "ÎßàÏãúÎã§", mon: "—É—É—Ö", pos: "v" }, { kor: "Î®πÎã§", mon: "–∏–¥—ç—Ö", pos: "v" }, 
        { kor: "Ï£ºÏä§", mon: "–∂“Ø“Ø—Å", pos: "n" }, { kor: "Ìò∏Ï£º", mon: "–∞–≤—Å—Ç—Ä–∞–ª–∏", pos: "n" }, 
        { kor: "Ïßë", mon: "–≥—ç—Ä", pos: "n" }, { kor: "ÏùòÏÇ¨", mon: "—ç–º—á", pos: "n" },
        { kor: "ÎØ∏Íµ≠", mon: "–∞–º–µ—Ä–∏–∫", pos: "n" }, { kor: "ÌöåÏÇ¨Ïõê", mon: "–∫–æ–º–ø–∞–Ω–∏–π–Ω –∞–∂–∏–ª—Ç–∞–Ω", pos: "n" }, 
        { kor: "ÏÇ¨Îã§", mon: "—Ö—É–¥–∞–ª–¥–∞–∂ –∞–≤–∞—Ö", pos: "v" }, { kor: "ÌîÑÎûëÏä§", mon: "—ÑÎûÄ—Ü", pos: "n" }, 
        { kor: "Ïò§Îã§", mon: "–∏—Ä—ç—Ö", pos: "v" }, { kor: "ÌîºÏûê", mon: "–ø–∏—Ü—Ü–∞", pos: "n" },
        { kor: "ÎèÑÏÑúÍ¥Ä", mon: "ÎÖ∏–º—ã–Ω —Å–∞–Ω", pos: "n" }, { kor: "Î™ΩÍ≥®", mon: "–º–æ–Ω–≥–æ–ª", pos: "n" }, 
        { kor: "ÏùΩÎã§", mon: "—É–Ω—à–∏—Ö", pos: "v" }, { kor: "ÌïúÍµ≠", mon: "—Å–æ–ª–æ–Ω–≥–æ—Å", pos: "n" }, 
        { kor: "ÏÑ†ÏÉùÎãò", mon: "–±–∞–≥—à", pos: "n" }, { kor: "Í∏∞Ïûê", mon: "—Å—ç—Ç–≥“Ø“Ø–ª—á", pos: "n" },
        { kor: "ÏãùÎãπ", mon: "—Ö–æ–æ–ª–Ω—ã –≥–∞–∑–∞—Ä", pos: "n" }, { kor: "ÏöîÎ¶¨ÏÇ¨", mon: "—Ç–æ–≥–æ–æ—á", pos: "n" }, 
        { kor: "ÏöîÎ¶¨ÌïòÎã§", mon: "—Ö–æ–æ–ª —Ö–∏–π—Ö", pos: "v" }, { kor: "Ï£ºÎã§", mon: "”©–≥”©—Ö", pos: "v" }, 
        { kor: "Ï§ëÍµ≠", mon: "—Ö—è—Ç–∞–¥", pos: "n" }, { kor: "ÏÇ¨Îûå", mon: "—Ö“Ø–Ω", pos: "n" },
        { kor: "ÏùºÎ≥∏", mon: "—è–ø–æ–Ω", pos: "n" }, { kor: "Íµ∞Ïù∏", mon: "—Ü—ç—Ä—ç–≥", pos: "n" }, 
        { kor: "Í∞ÄÏàò", mon: "–¥—É—É—á–∏–Ω", pos: "n" }, { kor: "Ïñ¥Îäê", mon: "–∞–ª—å", pos: "o" }, 
        { kor: "ÏùòÏûê", mon: "—Å–∞–Ω–¥–∞–ª", pos: "n" }, { kor: "Ïö¥ÎèôÌïòÎã§", mon: "–¥–∞—Å–≥–∞–ª —Ö–∏–π—Ö", pos: "v" },
        { kor: "ÎßàÌä∏", mon: "–¥—ç–ª–≥“Ø“Ø—Ä", pos: "n" }, { kor: "ÌïôÏÉù", mon: "–æ—é—É—Ç–∞–Ω", pos: "n" }, 
        { kor: "Î∞±ÌôîÏ†ê", mon: "–∏—Ö –¥—ç–ª–≥“Ø“Ø—Ä", pos: "n" }, { kor: "ÎèÖÏùº", mon: "–≥–µ—Ä–º–∞–Ω", pos: "n" }
    ];

    let wordList = [];
    let currentIdx = 0;
    let score = 0;
    let attempts = localStorage.getItem('attempts_1A1') ? parseInt(localStorage.getItem('attempts_1A1')) : 0;
    let name = "";
    let wrongWords = [];

    function prepareQuestions() {
        const shuffled = [...rawWords].sort(() => 0.5 - Math.random());
        wordList = shuffled.map((w, index) => {
            const isKorQuestion = Math.random() < 0.5;
            return {
                q: isKorQuestion ? w.kor : w.mon,
                a: isKorQuestion ? w.mon : w.kor,
                type: isKorQuestion ? "kor" : "mon",
                pos: w.pos
            };
        });

        wordList.forEach(w => {
            let pool = rawWords.filter(item => item.pos === w.pos || w.pos === 'o');
            let choicePool = w.type === "kor" ? pool.map(i => i.mon) : pool.map(i => i.kor);
            let choices = [w.a];
            let distractors = choicePool.filter(p => p !== w.a);
            distractors.sort(() => 0.5 - Math.random());
            if (distractors.length < 3) {
                let backupPool = w.type === "kor" ? rawWords.map(i => i.mon) : rawWords.map(i => i.kor);
                backupPool = backupPool.filter(p => p !== w.a && !distractors.includes(p));
                backupPool.sort(() => 0.5 - Math.random());
                distractors.push(...backupPool.slice(0, 3 - distractors.length));
            }
            choices.push(...distractors.slice(0, 3));
            w.choices = [...new Set(choices)].sort(() => 0.5 - Math.random());
        });
    }

    function startQuiz() {
        name = document.getElementById('userName').value;
        if (!name) { alert("–ù—ç—Ä—ç—ç –æ—Ä—É—É–ª–Ω–∞ —É—É!"); return; }
        prepareQuestions();
        document.getElementById('start-section').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        showQuestion();
    }

    function showQuestion() {
        if (currentIdx < wordList.length) {
            const item = wordList[currentIdx];
            document.getElementById('question-number').innerText = `${currentIdx + 1} / ${wordList.length}`;
            document.getElementById('question-instruction').innerText = 
                item.type === "kor" ? "–ó”©–≤ –º–æ–Ω–≥–æ–ª —É—Ç–≥—ã–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É." : "–ó”©–≤ —Å–æ–ª–æ–Ω–≥–æ—Å “Ø–≥–∏–π–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É.";
            document.getElementById('question-text').innerText = item.q;
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = "";
            item.choices.forEach(c => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerText = c;
                btn.onclick = () => checkAnswer(c);
                choicesDiv.appendChild(btn);
            });
        } else {
            finishQuiz();
        }
    }

    function checkAnswer(answer) {
        const item = wordList[currentIdx];
        if (answer === item.a) {
            score += (100 / wordList.length);
        } else {
            wrongWords.push(item);
        }
        currentIdx++;
        showQuestion();
    }

    function finishQuiz() {
        attempts++;
        localStorage.setItem('attempts_1A1', attempts);
        const finalScore = Math.round(score);

        if (finalScore >= 80 || attempts >= 5) {
            document.getElementById('quiz-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';
            document.getElementById('result-msg').innerHTML = 
                `<b>${name}</b>, –ë–∞—è—Ä —Ö“Ø—Ä–≥—ç–µ!<br><span class="score-text">–î“Ø–Ω: ${finalScore} –æ–Ω–æ–æ</span><br>` +
                `–û—Ä–æ–ª–¥–ª–æ–≥–æ: ${attempts}<br><br><b>–≠–Ω—ç –¥—ç–ª–≥—ç—Ü–∏–π–≥ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ö–∏–π–∂ –±–∞–≥—à —Ä—É—É–≥–∞–∞ –∏–ª–≥—ç—ç–Ω—ç “Ø“Ø.</b>`;
            localStorage.removeItem('attempts_1A1');
        } else {
            showReview(finalScore);
        }
    }

    function showReview(finalScore) {
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('review-section').style.display = 'block';
        const container = document.getElementById('wrong-answers-container');
        container.innerHTML = `<p style="font-weight:bold; color:#e74c3c;">–¢–∞–Ω—ã –¥“Ø–Ω: ${finalScore} –æ–Ω–æ–æ</p>`;
        
        wrongWords.forEach(w => {
            const div = document.createElement('div');
            div.className = 'wrong-item';
            div.innerHTML = `‚ùì <b>${w.q}</b> ‚Üí ‚úÖ –ó”©–≤: <b>${w.a}</b>`;
            container.appendChild(div);
        });
    }

    function retryQuiz() {
        currentIdx = 0; score = 0; wrongWords = [];
        prepareQuestions();
        document.getElementById('review-section').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        showQuestion();
    }
</script>
</body>
</html>
