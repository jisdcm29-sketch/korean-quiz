<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <title>TOPIK2 ì¸ë¬¼ íƒœë„ JSON ë§Œë“¤ê¸°</title>
  <style>
    :root{
      --bg:#0b1220;
      --text:#e7ecff;
      --muted:#aab6e6;
      --line:rgba(255,255,255,.10);
      --primary:#3b82f6;
      --green:#22c55e;
      --danger:#ef4444;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Arial, sans-serif;
      background: radial-gradient(1000px 800px at 30% -10%, rgba(59,130,246,.35), transparent 55%),
                  radial-gradient(900px 700px at 90% 0%, rgba(34,197,94,.18), transparent 50%),
                  var(--bg);
      color:var(--text);
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px 14px 22px;
    }
    .wrap{width:min(900px, 100%);}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hdr{
      padding:16px 16px 10px;
      border-bottom:1px solid var(--line);
      text-align:center;
    }
    .title{
      margin:0;
      font-size:20px;
      font-weight:1000;
    }
    .sub{
      margin:6px 0 0;
      font-size:13px;
      color: var(--muted);
      font-weight:800;
      line-height:1.4;
    }
    .content{padding: 14px 14px 16px;}
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 900px){
      .grid{grid-template-columns: 1fr 1fr;}
    }
    label{
      font-size:13px;
      color: var(--muted);
      font-weight:900;
      display:block;
      margin: 0 0 8px;
    }
    input, textarea{
      width:100%;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,15,25,.55);
      color: var(--text);
      padding: 12px 12px;
      font-size:14px;
      outline:none;
    }
    textarea{min-height: 220px; resize:vertical; line-height:1.4;}
    .btnRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top: 12px;
    }
    .btn{
      width:100%;
      border:0;
      border-radius: 18px;
      padding: 14px 12px;
      font-size:16px;
      font-weight:1000;
      color:white;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,.30);
      transition: transform .06s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{transform: translateY(1px) scale(.99)}
    .btnPrimary{background: linear-gradient(180deg, #4f8cff, #2563eb);}
    .btnGreen{background: linear-gradient(180deg, #34d399, #16a34a);}
    .note{
      margin-top: 10px;
      font-size:12px;
      color: rgba(231,236,255,.65);
      font-weight:800;
      line-height:1.5;
    }
    .err{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(239,68,68,.14);
      border:1px solid rgba(239,68,68,.35);
      color: #ffd3d3;
      font-size:13px;
      font-weight:1000;
      display:none;
      white-space:pre-wrap;
      line-height:1.45;
    }
    .ok{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(34,197,94,.14);
      border:1px solid rgba(34,197,94,.35);
      color: #d6ffe6;
      font-size:13px;
      font-weight:1000;
      display:none;
      white-space:pre-wrap;
      line-height:1.45;
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="hdr">
        <h1 class="title">TOPIK II Â· ì¸ë¬¼ íƒœë„ ì–´íœ˜ JSON ë§Œë“¤ê¸°</h1>
        <p class="sub">
          PDF(ë˜ëŠ” ë¬¸ì„œ)ì—ì„œ ë³µì‚¬í•œ ë‚´ìš©ì„ ì•„ë˜ì— ë¶™ì—¬ë„£ê³  â€œJSON ìƒì„±â€ì„ ëˆ„ë¥´ë©´<br/>
          <span class="mono">/data/topik2/vocab/level01_attitude.json</span>ì— ë„£ì„ ê²°ê³¼ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.
        </p>
      </div>

      <div class="content">
        <div class="grid">
          <div>
            <label>1) ì œëª©(í•œêµ­ì–´)</label>
            <input id="titleKr" value="ì¸ë¬¼ íƒœë„ ì–´íœ˜" />
            <label style="margin-top:10px;">2) ì œëª©(ëª½ê³¨ì–´)</label>
            <input id="titleMn" value="Ğ¥Ò¯Ğ½Ğ¸Ğ¹ Ñ…Ğ°Ğ½Ğ´Ğ»Ğ°Ğ³Ñ‹Ğ½ Ò¯Ğ³Ñ" />

            <div class="note">
              âœ… ì…ë ¥ í˜•ì‹(ê°„ë‹¨): í•œ ì¤„ì— 4ê°œë¥¼ íƒ­(TAB) ë˜ëŠ” | ë¡œ êµ¬ë¶„<br/>
              <span class="mono">í•œêµ­ì–´  [TAB]  ëª½ê³¨ì–´  [TAB]  ì˜ˆë¬¸(í•œêµ­ì–´)  [TAB]  ì˜ˆë¬¸(ëª½ê³¨ì–´)</span><br/>
              ì˜ˆë¬¸ì´ ì—†ìœ¼ë©´ ì˜ˆë¬¸ ì¹¸ì€ ë¹„ì›Œë„ ë©ë‹ˆë‹¤.
            </div>
          </div>

          <div>
            <label>3) ë‹¨ì–´ ëª©ë¡ ë¶™ì—¬ë„£ê¸°(ì—¬ê¸°ì— ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ê¸°)</label>
            <textarea id="src" placeholder="ì˜ˆ)
ê°€ì •í•˜ë‹¤\tĞ¢Ğ¾Ğ¾Ñ†Ğ¾Ñ…\tìš°ë¦¬ê°€ ë¹„ê°€ ì˜¬ ìƒí™©ì„ ê°€ì •í•´...\tĞ‘Ğ¸Ğ´ Ğ±Ğ¾Ñ€Ğ¾Ğ¾ Ğ¾Ñ€Ğ¾Ñ…Ñ‹Ğ³ Ñ‚Ğ¾Ğ¾Ñ†Ğ¾Ğ¶...
ê°íƒ„í•˜ë‹¤\tĞ‘Ğ¸ÑˆÑ€ÑÑ…\t...\t...
(ì´ëŸ° ì‹ìœ¼ë¡œ ì—¬ëŸ¬ ì¤„)"></textarea>

            <div class="btnRow">
              <button class="btn btnPrimary" id="btnBuild">JSON ìƒì„±</button>
              <button class="btn btnGreen" id="btnCopy">ê²°ê³¼ JSON ë³µì‚¬</button>
            </div>

            <div class="err" id="err"></div>
            <div class="ok" id="ok"></div>
          </div>
        </div>

        <div style="margin-top:14px;">
          <label>4) ê²°ê³¼ JSON (ì´ê±¸ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ GitHub íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°)</label>
          <textarea id="out" class="mono" style="min-height:260px;" readonly></textarea>
        </div>

        <div class="note">
          ğŸ“Œ íŒ: PDFì—ì„œ ë³µì‚¬í•  ë•Œ ì¤„ì´ ê¹¨ì§€ë©´, ì—‘ì…€/êµ¬ê¸€ì‹œíŠ¸ì— í•œë²ˆ ë¶™ì—¬ë„£ê³  â€œ4ì—´(í•œêµ­ì–´/ëª½ê³¨ì–´/ì˜ˆë¬¸KR/ì˜ˆë¬¸MN)â€ë¡œ ì •ë¦¬í•œ ë’¤,
          ë‹¤ì‹œ ë³µì‚¬í•˜ë©´ ê°€ì¥ ê¹”ë”í•©ë‹ˆë‹¤.
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  function showErr(msg){
    $("ok").style.display = "none";
    $("err").textContent = msg;
    $("err").style.display = "block";
  }
  function showOk(msg){
    $("err").style.display = "none";
    $("ok").textContent = msg;
    $("ok").style.display = "block";
  }

  function normalizeLine(line){
    // êµ¬ë¶„ì: íƒ­, |, ë‹¤ì¤‘ ê³µë°±(2ì¹¸ ì´ìƒ)
    let parts = line.split("\t");
    if (parts.length < 2) parts = line.split("|").map(s => s.trim());
    if (parts.length < 2) parts = line.split(/\s{2,}/); // ê³µë°± 2ê°œ ì´ìƒ

    // trim
    parts = parts.map(s => (s || "").trim()).filter((_, i) => i < 6); // ì•ˆì „
    return parts;
  }

  function build(){
    const title_kr = ($("titleKr").value || "").trim() || "ì¸ë¬¼ íƒœë„ ì–´íœ˜";
    const title_mn = ($("titleMn").value || "").trim() || "Ğ¥Ò¯Ğ½Ğ¸Ğ¹ Ñ…Ğ°Ğ½Ğ´Ğ»Ğ°Ğ³Ñ‹Ğ½ Ò¯Ğ³Ñ";
    const raw = $("src").value || "";
    const lines = raw.split(/\r?\n/).map(s => s.trim()).filter(Boolean);

    if (!lines.length) return showErr("ë¶™ì—¬ë„£ê¸°í•œ ë‚´ìš©ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.");

    const items = [];
    for (const line of lines){
      const p = normalizeLine(line);

      // ìµœì†Œ: ko + mn
      const ko = (p[0] || "").trim();
      const mn = (p[1] || "").trim();
      if (!ko || !mn) continue;

      const ex_ko = (p[2] || "").trim();
      const ex_mn = (p[3] || "").trim();

      items.push({ ko, mn, ex_ko, ex_mn });
    }

    if (!items.length) return showErr("ì¸ì‹ëœ í•­ëª©ì´ 0ê°œì…ë‹ˆë‹¤. ê° ì¤„ì— 'í•œêµ­ì–´ + ëª½ê³¨ì–´'ëŠ” ë°˜ë“œì‹œ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.");

    const out = { title_kr, title_mn, items };
    $("out").value = JSON.stringify(out, null, 2);
    showOk(`ì™„ë£Œ! ${items.length}ê°œ í•­ëª©ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.\nì´ JSONì„ ë³µì‚¬í•´ì„œ /data/topik2/vocab/level01_attitude.jsonì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.`);
  }

  async function copyOut(){
    const text = $("out").value || "";
    if (!text) return showErr("ë¨¼ì € JSON ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
    try{
      await navigator.clipboard.writeText(text);
      showOk("ë³µì‚¬ ì™„ë£Œ! ì´ì œ GitHub íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.");
    }catch(e){
      // iOS ë“± ì˜ˆì™¸: ìˆ˜ë™ ë³µì‚¬ ì•ˆë‚´
      $("out").focus();
      $("out").select();
      showOk("ìë™ ë³µì‚¬ê°€ ì•ˆ ë˜ë©´, ìœ„ ê²°ê³¼ JSONì„ ê¸¸ê²Œ ëˆŒëŸ¬ ì „ì²´ ì„ íƒâ†’ë³µì‚¬í•˜ì„¸ìš”.");
    }
  }

  $("btnBuild").addEventListener("click", build);
  $("btnCopy").addEventListener("click", copyOut);
})();
</script>
</body>
</html>
